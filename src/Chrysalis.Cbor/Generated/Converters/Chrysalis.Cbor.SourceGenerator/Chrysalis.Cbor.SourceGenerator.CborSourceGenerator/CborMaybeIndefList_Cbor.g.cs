// <auto-generated/>
using System;
using System.Collections.Generic;
using System.Formats.Cbor;
using Chrysalis.Cbor.Types;

namespace Chrysalis.Cbor.Types.Custom;

public partial record CborMaybeIndefList
{
    // Serialization implementation
    public static new void Write(CborWriter writer, global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T> value)
    {
        // Determine the concrete type from its type name
switch (value.CborTypeName)
{
    case "CborDefList":
        global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborDefList.Write(writer, (global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborDefList)value);
        break;
    case "CborIndefList":
        global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborIndefList.Write(writer, (global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborIndefList)value);
        break;
    case "CborDefListWithTag":
        global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborDefListWithTag.Write(writer, (global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborDefListWithTag)value);
        break;
    case "CborIndefListWithTag":
        global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborIndefListWithTag.Write(writer, (global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborIndefListWithTag)value);
        break;
    default:
        throw new Exception($"Unknown union type: {value.CborTypeName}");
}

    }

    // Deserialization implementation
    public static new global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T> Read(ReadOnlyMemory<byte> data)
    {
        // Try each union case
var originalData = data;
Exception lastException = null;
// Try CborDefList
try
{
    var result = global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborDefList.Read(originalData);
    return result;
}
catch (Exception ex)
{
    lastException = ex;
}
// Try CborIndefList
try
{
    var result = global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborIndefList.Read(originalData);
    return result;
}
catch (Exception ex)
{
    lastException = ex;
}
// Try CborDefListWithTag
try
{
    var result = global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborDefListWithTag.Read(originalData);
    return result;
}
catch (Exception ex)
{
    lastException = ex;
}
// Try CborIndefListWithTag
try
{
    var result = global::Chrysalis.Cbor.Types.Custom.CborMaybeIndefList<T>.CborIndefListWithTag.Read(originalData);
    return result;
}
catch (Exception ex)
{
    lastException = ex;
}
throw new Exception("Could not deserialize union type", lastException);

    }   
}