using System.Reflection;
using Chrysalis.Cardano.Models.Core.Transaction;
using Chrysalis.Cbor;
using Xunit;

namespace Chrysalis.Test;

public class CborSerializerTests
{
    [Theory]
    // [InlineData("1834", typeof(CborInt))] // Example hex for CBOR int 52
    // [InlineData("4101", typeof(CborBytes))] // Example hex for CBOR bytes {0x01)]
    // [InlineData("1a000f4240", typeof(CborUlong))] // Example hex for CBOR ulong 1_000_000
    // [InlineData("1a000f4240", typeof(PosixTime))] // Example hex for CBOR ulong 1_000_000
    // [InlineData("43414243", typeof(CborBytes))] // Example hex for CBOR bytes of `ABC` string
    // [InlineData("a141614541696b656e", typeof(CborMap<CborBytes, CborBytes>))] // {h'61': h'41696b656e'}
    // [InlineData("a1450001020304a1450001020304182a", typeof(MultiAsset))] // {h'61': h'41696b656e'}
    // [InlineData("9f0102030405ff", typeof(CborIndefiniteList<CborInt>))] // [_ 1, 2, 3, 4, 5]
    // [InlineData("850102030405", typeof(CborDefiniteList<CborInt>))] // [1, 2, 3, 4, 5]
    // [InlineData("9f824401020304182a824405060708182bff", typeof(CborIndefiniteList<TransactionInput>))] // [_ [h'01020304', 42_0], [h'05060708', 43_0]]
    // [InlineData("d8799f182aff", typeof(Option<CborInt>))] // Serialized CBOR for Option::Some(42):
    // [InlineData("d87a80", typeof(Option<CborInt>))] // Serialized CBOR for Option::None:
    // [InlineData("d8799f4180ff", typeof(Signature))] // Serialized CBOR for Signature:
    // [InlineData("d87c9f029fd8799f446b657931ffd8799f446b657932ffd8799f446b657933ffffff", typeof(AtLeast))] // Serialized CBOR for AtLeast Multisig:
    // [InlineData("d8799fd8799f581ceca3dfbde8ccb8408cefacda690e34aa9353af93fc02e75d8ba42f1bff58202325f3c999b17d4a6399bf6c02e1ff7615c13a73ecafae7fe813b9757f27ef2600ff", typeof(Treasury))] // Serialized CBOR for Signature:
    // [InlineData("8201d818587ed8799fd8799fd87a9f581c1eae96baf29e27682ea3f815aba361a0c6059d45e4bfbe95bbd2f44affffd8799f4040ffd8799f581caf65a4734e8a22f43128913567566d2dde30d3b3298306d6317570f64e0014df104d494e20496e7465726eff1a2a2597de1a009896801b0000000ba43b740018641864d87a80d87980ff", typeof(DatumOption))] // Serialized CBOR for Inline Datum:
    // [InlineData("d81842ffff", typeof(CborEncodedValue))] // Serialized CBOR for CIP68:
    // [InlineData("a300583911ea07b733d932129c378af627436e7cbc2ef0bf96e0036bb51b3bde6b52563c5410bff6a0d43ccebb7c37e1f69f5eb260552521adff33b9c201821a00dd40a0a2581caf65a4734e8a22f43128913567566d2dde30d3b3298306d6317570f6a14e0014df104d494e20496e7465726e1b0000000ba43b7400581cf5808c2c990d86da54bfc97d89cee6efa20cd8461616359478d96b4ca2434d5350015820e08460587b08cca542bd2856b8d5e1d23bf3f63f9916fb81f6d95fda0910bf691b7fffffffd5da682b028201d818587ed8799fd8799fd87a9f581c1eae96baf29e27682ea3f815aba361a0c6059d45e4bfbe95bbd2f44affffd8799f4040ffd8799f581caf65a4734e8a22f43128913567566d2dde30d3b3298306d6317570f64e0014df104d494e20496e7465726eff1a2a2597de1a009896801b0000000ba43b740018641864d87a80d87980ff", typeof(TransactionOutput))] // Serialized CBOR for TransactionOutput:
    // [InlineData("D8799F9FD87B9F005820567463495E4DC4FB67268D9A6E92836A68A18A317D2F0CA6CC6D695EE7733889582023B4DA2A35E86C585A6F5FCCFF3B53F7660D73536C79FF486BCAB719B518C58FFFFFD8799FD8799F581CA7E1D2E57B1F9AA851B08C8934A315FFD97397FA997BB3851C626D3BFFA0A140A1401A05F5E10041004100FFFF", typeof(TreasuryRedeemer))] // Serialized CBOR for TreasuryRedeemer:
    // [InlineData("820800", typeof(ProtocolVersion))] // Serialized CBOR for ProtocolVersion
    // [InlineData("8458205c04fb3111739a79e318135ef5bbfcba008533f2315ec5525210856024f6917f151903f65840d5341b64c77472028d78fabbc43a3873f3ae8f7e2daf6dc9e475024acbc179d42cb014ae4acd79dc2cd28c6186f4b1c07edaeecd3c48ec1cdc30e969b6ef3a03", typeof(OperationalCert))] // Serialized CBOR for OperationalCert
    // [InlineData("825840bb060ee2d34b4e23c5d402ba181330ecf32777cdf745789aea9afe94c1b0df474fd2fb60e6965b247b338ebcf337c383b57731c016e71d93fd5e5f8dc8665915585060941c4ac096a3a5e25c16c910bb85393012a02b14623470130c27cf6d27ea37ed5b03c8051ec2f237ab4fd5f43aff2289721d573e8e7de7515fda4143f4dc611b5f399467c726e3375df00617cb3b05", typeof(VrfCert))] // Serialized CBOR for VrfCert
    // [InlineData("8a1a00a4cdc11a07fd9ced5820f900395a8b763e7fb2630d3b4b4f8925e225205e5a4544275778bd8c5eb4f14c5820b4a64416f171e59d66e0d1890e9146211c2fb4e70930ea782f0f4983decb285e5820399f9f34c7947c86992b9cce3e6a58343d3d770de8b1525b2dea88893905efbf825840bb060ee2d34b4e23c5d402ba181330ecf32777cdf745789aea9afe94c1b0df474fd2fb60e6965b247b338ebcf337c383b57731c016e71d93fd5e5f8dc8665915585060941c4ac096a3a5e25c16c910bb85393012a02b14623470130c27cf6d27ea37ed5b03c8051ec2f237ab4fd5f43aff2289721d573e8e7de7515fda4143f4dc611b5f399467c726e3375df00617cb3b051a000150bd5820556a0b2a892073e5c0c598d3a04737d827c3708d2c9cb04c7142d80ddd1385908458205c04fb3111739a79e318135ef5bbfcba008533f2315ec5525210856024f6917f151903f65840d5341b64c77472028d78fabbc43a3873f3ae8f7e2daf6dc9e475024acbc179d42cb014ae4acd79dc2cd28c6186f4b1c07edaeecd3c48ec1cdc30e969b6ef3a03820901", typeof(BlockHeaderBody))] // Serialized CBOR for HeaderBody(Conway)
    // [InlineData("8a1a00a076f71a07a51cec58203228c42f0af94c7576946942d7494634b11c4562e5d5257730a5e632dfd44bf358209ab6d0f36afdf63b527ab257f5a3f6625f2844c6cd83eecce3a1d8811cadb9b958208e4715edc8ef2d6a8c1860b11675fe0afa186eebf2cfb62aaf4c3526b8c5bd4882584066a21b2c4f9aa32fb5b499bab11891f2abce92a6f51f8ff5ed5dd4a6eeee750e23bd1505ea910637cad190766f90998fa7865a8f776ff0a3707f374abaddfe45585044bee1c7492d7d08066de3fd7e76b8e2ec48a2887cfc4c5152083edd3850f3e4969f33700163b1139ddaffb3a6cfd29e995bcbde1e1b063bb288f660e4c0ba6653233ab741762fe5b1a5368ed0fbb30819c5ca5820ca1158d016cd2cb338ce3d9f04e6f9f6314cd4b2054b5391907808f5f262c7dc845820878946c26f0fe05879a5591d77fa7b26ff6a7fa303c2ef9fd81bfce791f34ce40c1903bf58409fd5ff67c18649c50f3169e6680b33b011562a952b6fe97918c95c8604141858b8e771315c9c87d4a81843b1d62ba60e52abb9df46ad135c621aee9e5b80cc02820800", typeof(BlockHeaderBody))] // Serialized CBOR for HeaderBody(Babbage)
    // [InlineData("8f1a006b0f171a035877e8582059aab61986b323527011efcc941a350b36d6d59edc21fe1600e77be8a354c7655820f492625f14992782625aac4177b76130749c888d0df6adf2da26c7086f74437d5820ab290b1f62e86b6079c179b462a4de11b2028148124be71445e083b62f535b3782584020b88ead1afcaf8880a61a1ba83793fac9a358661888fe34376709b1e18ffbd74dd9d977b2aa51b926a3755da2d0125bdf2f5018de4b47c3131ce8d4db900ee65850f10b18ce2d63c8864b182efdd221867b5c90fa02627bf594e064490a3f9f1a068cbf285446462b931c797166e7061db8189b46b250693e64236c5fc98e115f3dbc423d108fbd5cc44cd16fa917ddce0a8258400004d68febdfe65d2f45e343af88b41746ce3087e16180c0e574e1abade72f2d969f69b61024b83b682b59a773cd04f6989b2b14805371122e70fca09284ecb558504dce6f572748203bb1ee6c8162bc644d9476d56a0a97632877a014b669e48234a0a70b7c1d88b822042ff6419fb0c73521c79a6b508d9c46001e802c5bdb51b6b18430461ae518314c54c2a5d1e81b0d19b38d5820477740dfd9ad3bb33ab534ed6dc1e06e455a3397fc9adabb972220a326c0b58b5820da24cac0e7a88a4bda8a8b5f44e59c2ace45c75fac0a797b4acd352a007a6753061901a45840c42104b2b016433ade455b25aa4e81073152dfd825a7b65922c573a01f07a0f987f70243968e5348a58772458a1031144e1c1b28e7748136e87be18e29e87f0d0600", typeof(BlockHeaderBody))] // Serialized CBOR for HeaderBody(Alonzo)
    // [InlineData("828f1a006b0f171a035877e8582059aab61986b323527011efcc941a350b36d6d59edc21fe1600e77be8a354c7655820f492625f14992782625aac4177b76130749c888d0df6adf2da26c7086f74437d5820ab290b1f62e86b6079c179b462a4de11b2028148124be71445e083b62f535b3782584020b88ead1afcaf8880a61a1ba83793fac9a358661888fe34376709b1e18ffbd74dd9d977b2aa51b926a3755da2d0125bdf2f5018de4b47c3131ce8d4db900ee65850f10b18ce2d63c8864b182efdd221867b5c90fa02627bf594e064490a3f9f1a068cbf285446462b931c797166e7061db8189b46b250693e64236c5fc98e115f3dbc423d108fbd5cc44cd16fa917ddce0a8258400004d68febdfe65d2f45e343af88b41746ce3087e16180c0e574e1abade72f2d969f69b61024b83b682b59a773cd04f6989b2b14805371122e70fca09284ecb558504dce6f572748203bb1ee6c8162bc644d9476d56a0a97632877a014b669e48234a0a70b7c1d88b822042ff6419fb0c73521c79a6b508d9c46001e802c5bdb51b6b18430461ae518314c54c2a5d1e81b0d19b38d5820477740dfd9ad3bb33ab534ed6dc1e06e455a3397fc9adabb972220a326c0b58b5820da24cac0e7a88a4bda8a8b5f44e59c2ace45c75fac0a797b4acd352a007a6753061901a45840c42104b2b016433ade455b25aa4e81073152dfd825a7b65922c573a01f07a0f987f70243968e5348a58772458a1031144e1c1b28e7748136e87be18e29e87f0d06005901c0ac1591f54da90ca03498d4667023f30fd09afa207b80f3f0866c730e91558ee4b10ede3810d69b842d06dc679522ad98722530bf6d8452aa2b8e6f1f5d1e9304784659cec31ebf7f29e6deff79d5d6a2842c24cd20f5ce02f80e08678daa907087b068c812eb5523afa0438134e73b2382478f93fe82d0d2b3ea7a9c1a3606f34ca3c89f0d84b280d5f716661cd93254b14c18d99d51f6a2ebd175210b5524ceb8ad3ec0ec9ca2564b168e7e00ec96e0271c47328468950edd89f4bca390acebd53413c9344a0b2a8fcb4ec668949450ad6381d2af7bbac5d024f0251b114b3732072c2851b82fbc7f5f8ce0640fd14c29dc2d591736a17c90036f7efbf8ed00239a028ee0890286615c5bbe88c6ead7d5d821d34b111133bb9806c8bb8b73d065959a427dfd5fcea80a0bbda6a07c2ed870ac8c728a57751aef30902ea8cda5961015fe7f843f892a1ae978cdd55b57e14497cc48d540f42449e803637727403dad6c188b64a61e94ab5bfed8c39360f18347aaeae473a069a6c479db3fbe190a3bb236eea6e9b163c628effafc287b081041f94df6a91a62f50ae6740cb980da7a9f5e2080a98b4a6c73de537b2a70ad50df7aea318d34ef6f2e860e511f40", typeof(BlockHeader))] // Serialized CBOR for Header(Alonzo)
    // [InlineData("828a1a00a076f71a07a51cec58203228c42f0af94c7576946942d7494634b11c4562e5d5257730a5e632dfd44bf358209ab6d0f36afdf63b527ab257f5a3f6625f2844c6cd83eecce3a1d8811cadb9b958208e4715edc8ef2d6a8c1860b11675fe0afa186eebf2cfb62aaf4c3526b8c5bd4882584066a21b2c4f9aa32fb5b499bab11891f2abce92a6f51f8ff5ed5dd4a6eeee750e23bd1505ea910637cad190766f90998fa7865a8f776ff0a3707f374abaddfe45585044bee1c7492d7d08066de3fd7e76b8e2ec48a2887cfc4c5152083edd3850f3e4969f33700163b1139ddaffb3a6cfd29e995bcbde1e1b063bb288f660e4c0ba6653233ab741762fe5b1a5368ed0fbb30819c5ca5820ca1158d016cd2cb338ce3d9f04e6f9f6314cd4b2054b5391907808f5f262c7dc845820878946c26f0fe05879a5591d77fa7b26ff6a7fa303c2ef9fd81bfce791f34ce40c1903bf58409fd5ff67c18649c50f3169e6680b33b011562a952b6fe97918c95c8604141858b8e771315c9c87d4a81843b1d62ba60e52abb9df46ad135c621aee9e5b80cc028208005901c07475c5276afbfd46e7eb54515467eb3244c40c915b90378771ae235d6efc4a3ee3f6f0ab63dae2e4e3733800d61ca44b48601149f1eb47e6771326d9b2111c04f4ad4d5f9a7044b8aabedb260b86ef0472149a110b351f2a13dd93f602e2980aa06f037f755e9093d96130e4a1533fb6b20a1356185f53f39548ef569773970348f2b0638a72fe6d06b75abc29e408216c229cb4fa8956ffd36eb7c79d741274f28fee2ecda595d62e164c3081f077e590f58b1ae247c05f574c3c0b6e9b7588c19260c4ccdd9a8382896b17fbca50014ed2a72879b30c500821fdd45cfa8f1ba7183da404d63dea8261a193e7cd499c571119a73c0aaa1bffba9410a7878655b3b13136e197a5e56e21af0f9d41c0fb6a98bdbf77011128b49def09d9c351339cb3d44de4945a922fac512b87136c2b3cb3e5e57ea3474f604f8b89b722124a5ffbc6b3c85d9eda86403043912e1a2b5e500805a838da39caf4818d310e18be8792b56f37072223bff98fb9829e57676526768c2db4e0fb8fa8340b2cdcde0178614d5a25dcba2b31ef71f4b5d80b2581121c8044d98ce2b1b26ffa9f350b5184fd6dd1c24833972db817e2b8c34340933c652ff5e59acf906a56b5402a831f", typeof(BlockHeader))] // Serialized CBOR for Header(Babbage)
    // [InlineData("828a1a00a4cdc11a07fd9ced5820f900395a8b763e7fb2630d3b4b4f8925e225205e5a4544275778bd8c5eb4f14c5820b4a64416f171e59d66e0d1890e9146211c2fb4e70930ea782f0f4983decb285e5820399f9f34c7947c86992b9cce3e6a58343d3d770de8b1525b2dea88893905efbf825840bb060ee2d34b4e23c5d402ba181330ecf32777cdf745789aea9afe94c1b0df474fd2fb60e6965b247b338ebcf337c383b57731c016e71d93fd5e5f8dc8665915585060941c4ac096a3a5e25c16c910bb85393012a02b14623470130c27cf6d27ea37ed5b03c8051ec2f237ab4fd5f43aff2289721d573e8e7de7515fda4143f4dc611b5f399467c726e3375df00617cb3b051a000150bd5820556a0b2a892073e5c0c598d3a04737d827c3708d2c9cb04c7142d80ddd1385908458205c04fb3111739a79e318135ef5bbfcba008533f2315ec5525210856024f6917f151903f65840d5341b64c77472028d78fabbc43a3873f3ae8f7e2daf6dc9e475024acbc179d42cb014ae4acd79dc2cd28c6186f4b1c07edaeecd3c48ec1cdc30e969b6ef3a038209015901c0e4dcaeeff4c6bbd5e47fea3ac20aee40574b450903a811a0761297aef0892111b54481e88c363ca0025501c58500efddac809cc3f10ac6289e9929d8560c230483f928a0a5016d9ae0d3ba43233983bf32014df16c02bc66a917b85d98e12bad15df95de5ffcd62e4fbdb8c50377fa6b8da5c43a27ce95923bc1cbb4faa72c9e9630926675ec4c92c5f1de8212b1b904dabc750222edce42dcaf58d236b2783f719c908d6841f177e82f2e76ca3ca0f96cbe936d24a658d26f23975572c01cb7681a6017c8d85e34b5ac343c6db51ae28d0cdf9f3eea3ef5e9b86a6c38aaab7bbc0e15b84b73ae035f0b75af9172facb7d469c743ce38f8a2d8009a1e910e1832e44037c03627e87993f83d7dc570b76f24123b93e0413c95af4f40df331b333af7f346c4067c2bb9ed83cd071a4e94048ee2b3395918bfcda4e1ecc035b4eb134e6ecbf337a64d16f1b0121918aa4347897ba30e3ec74aa8e502bcdd70d054c340648d2768303b7f095edaf28358b9f97b0093aa6c0bc76525664a0b9d0c78d872b8f7c7b840c0e3292b7c910655da1c0bffeaae80298593267c979c196cffecaff571ba6248acc7c4c338b3c7a93584d04a47c74c2c5beda2e6f4aa26d4f39", typeof(BlockHeader))] // Serialized CBOR for Header(Conway)
    // [InlineData("d81e82011864", typeof(CborRationalNumber))] // Serialized CBOR for RationalNumber
    // [InlineData("8301194a397272312e3170657263656e74706f6f6c2e6575", typeof(Relay))] // Serialized CBOR for Relay
    [InlineData("a1636d736781774d696e737761703a204f72646572204578656375746564", typeof(TransactionMetadatum))]
    [InlineData("a11902a2a1636d736781774d696e737761703a204f72646572204578656375746564", typeof(AuxiliaryData))]
    // [InlineData("8a03581c17a6a1f2fb36d9ef275805db17409af7ab753b9d27bdd41b89510bb95820d3f8aefa1294051e238db5f296014330f670a84e66d2bda30bce837ce709ba211b00000002540be4001a1443fd00d81e82011864581de1b8e0ffa9c7abb32c18e9712e15ad028400a41f91ead639da2f957dd681581cb8e0ffa9c7abb32c18e9712e15ad028400a41f91ead639da2f957dd6828301194a397272312e3170657263656e74706f6f6c2e65758301194a3a7272322e3170657263656e74706f6f6c2e657582782f68747470733a2f2f7777772e3170657263656e74706f6f6c2e65752f31504354322e6d657461646174612e6a736f6e582045e456dccd65ec342e4072c9e2f566fe22d2233dec45a5b48a2bc6d3fea78f5b", typeof(PoolRegistration))] //PoolRegistration
    // [InlineData("82008200581c87aeddbe3a9a55e339b39d807bd5ae28698fe98f60aaab472e19beeb", typeof(StakeRegistration))] //StakeRegistration
    // [InlineData("82018200581cfb8f9af27e883d383cef8436996e95a604c3d5cc29bfe7e2de02f5b4", typeof(StakeDeregistration))] //StakeDeregistration
    // [InlineData("83028200581c13f76393994e463d2eeb47210313065fec562a92041e5664ad89a30b581c4744b317cba46d5f247e51d4df3d72c9e2a8b18231c30ba1708bd65b", typeof(StakeDelegation))] //StakeDelegation
    // [InlineData("8304581c48b14df69375d393b3728a01bf38a049c0b1eec04d973922cab835c31901fc", typeof(PoolRetirement))] //PoolRetirement
    // [InlineData("83098200581c3dd92899f772d4616a1a7fcbf1c4b161deb8f7eecc77d6bbecee62ac8200581cf0ed00410031f3288d7889aa896cfdad79a7441885d3bae8982ac151", typeof(VoteDelegCert))] //VoteDeleg
    // [InlineData("830e8201581c349e55f83e9af24813e6cb368df6a80d38951b2a334dfcdf268155588201581c07e0eb70a1cfd5de084b5fcc8a9b28ff7772282b57e760d692c75bde", typeof(AuthCommitteeHotCert))] //AuthCommitteeHot
    // [InlineData("84108200581ccb09d689352f623d5f5cd4e8b3ff060a165b5e6556b8e9c8ce186ac51a1dcd650082785768747470733a2f2f64726570646f7466756e2e73332e65752d776573742d322e616d617a6f6e6177732e636f6d2f31366239643165362d366638382d343730312d383836652d3465663364646366356436642e6a736f6e5820deab83c9635be8248f4a43a63efb2968ea9132b9426e6e5f4228c74cf5cb3797", typeof(RegDrepCert))] //RegDrepCert with Anchor
    // [InlineData("84108200581cbfd1651564e3fe4bae43e1a6ebe090ebdcf69ef3aa684867b49219c41a1dcd6500f6", typeof(RegDrepCert))] //RegDrepCert with Anchor Null
    // [InlineData("83118200581cbd1b2f8d71a5890a38946322b93fc003dc5a61873fdc7e7e5856f3e91a1dcd6500", typeof(UnRegDrepCert))] //UnRegDrepCert
    // [InlineData("83128200581c725cceb7823111ea775edd2cfe577eae89b16520856703095b1b28d782784b68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f43617264616e6f4578706c6f7265722f647265702f6d61696e2f6d657461646174612e6a736f6e6c6458208bff6c4cb86f05458075c787cb843f7dffb52f2b7f438037d291d987d71f7738", typeof(UpdateDrepCert))] //UpdateDrepCert
    // [InlineData("a600818258205c433145addae9555c8948cb6e041e05fe4a3379debd0c948d352aebb9e99b2f00018182583901b3326f3bba239194b2407e6a527948a7e6e3e2d199919fa07f4985f0d07820b822b66d682d973239100f9b614ee18f369c27931ab15d54e61b000000388690171d021a0002b149031a08021a2d048183128200581c725cceb7823111ea775edd2cfe577eae89b16520856703095b1b28d782784b68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f43617264616e6f4578706c6f7265722f647265702f6d61696e2f6d657461646174612e6a736f6e6c6458208bff6c4cb86f05458075c787cb843f7dffb52f2b7f438037d291d987d71f77380800", typeof(TransactionBody))] // Serialized CBOR for TransactionBody(Conway)
    // [InlineData("a80082825820083d95d8352c349b453400042cc63ac34a589293dd59ccc8b062f079ea5e05ea0082582066ef6e5199ee3d875516e8ceae113e7f309186c45f1e35ef1c6b35dfb8ca5708020183a20058390195e7d4a51aec52dd528a84ad95e411b3f314a49a97714ebbe735c04768838865663d8666a24e66dd5daedb683eb48d07568b126f485d185a01821a001a3c1ba1581ca6b92cdf28af39782e8baecb712298e0bc91787375569b1f0c8fd703a1462443534276311a0132ba27a300583931905ab869961b094f1b8197278cfe15b45cbe49fa8f32c6b014f85a2db2f6abf60ccde92eae1a2f4fdf65f2eaf6208d872c6f0e597cc10b0701821a2406a090a2581c63f947b8d9535bc4e4ce6919e3dc056547e8d30ada12f29aa5f826b8a158209a9ab7431a3db1542009a50fbe1815054c0b8027164dfc7c1ef10fcdbe002b5501581ca6b92cdf28af39782e8baecb712298e0bc91787375569b1f0c8fd703a1462443534276311a2dd67131028201d81858e4d87989d87982581c63f947b8d9535bc4e4ce6919e3dc056547e8d30ada12f29aa5f826b858209a9ab7431a3db1542009a50fbe1815054c0b8027164dfc7c1ef10fcdbe002b55d879824040d87982581ca6b92cdf28af39782e8baecb712298e0bc91787375569b1f0c8fd703462443534276311b0000001166b125ce1a001373c2581cedbf33f5d6e083970648e39175c49ec1c093df76b6e6a0f1473e47761b000000028f200558581c8807fbe6e36b1c35ad6f36f0993e2fc67ab6f2db06041cfa3a53c04a581c554daf3e27e50c8c779713be6ba70f95c35f23f0552a28e5a7a340148258390122aea2da15e494e01767145d48bda16b6d437f1c449823a044193daf299a82ef56311aa10adf04c0072d4870eb9f4d5ff315132434841b741a001312d0021a0005cf0505a1581df196f5c1bee23481335ff4aece32fe1dfa1aa40a944a66d2d6edc9a9a5000b58203a98f88216e5025db28f06e90c56b3def9f35e3ac2beef37aef7f09ace7a60c00d81825820dd325cdb8c4b2d7fbc66d6e04f2abce41e52fbf55807948aed6b9abb726eb699000e81581cedbf33f5d6e083970648e39175c49ec1c093df76b6e6a0f1473e47761283825820c4a540ac2e06c217dd4fb3f39ca3863da394ba134677dafa9b98830ca71d584d03825820b91eda29d145ab6c0bc0d6b7093cb24b131440b7b015033205476f39c690a51f00825820b91eda29d145ab6c0bc0d6b7093cb24b131440b7b015033205476f39c690a51f01", typeof(TransactionBody))] // Serialized CBOR for TransactionBody(Conway)
    // [InlineData("a800818258208d84eef32fcacf5792877809c663ceef9d94a1a83f4eb9979e5d068bb14688b00301838258390179e0c0db2fc4786546f2f7d7914cbe899b61776401d78dd21e44b8626c4734f9fa72a547d83adb86c4431df7c78c8519d8238a09b2a5cc7f821a0011b0dea1581c555a99109b2cf170069e84d98b5a94e9ca15a69d5eb80dcd044598b4a1476e616d65343431018258393195f88cd39531c64a8749a625e5d3f9a79cc85d2001db23d851ad65bd19971dfb46a7fa611ddf545ee84dabd741454c4837669de8322d71811a000f42408258390179e0c0db2fc4786546f2f7d7914cbe899b61776401d78dd21e44b8626c4734f9fa72a547d83adb86c4431df7c78c8519d8238a09b2a5cc7f1a048e908c021a0003388d031a0806dede07582052966b4accdf10a1d562d671ffebe13583892a46dcc63fc1be5038702689bd1a081a0806d0ce09a1581c555a99109b2cf170069e84d98b5a94e9ca15a69d5eb80dcd044598b4a1476e616d65343431010e82581c79e0c0db2fc4786546f2f7d7914cbe899b61776401d78dd21e44b862581c6c4734f9fa72a547d83adb86c4431df7c78c8519d8238a09b2a5cc7f", typeof(TransactionBody))] // Serialized CBOR for TransactionBody(Conway)
    // [InlineData("a800838258201804b13f34a8452066ff1cad68bd09383f65d407f2f84b31fce0ef7906afe28e00825820fb62b5141e0e6595e4e7382d7b16747785b3333e89d65079c2d39f3d65b1e73100825820fb62b5141e0e6595e4e7382d7b16747785b3333e89d65079c2d39f3d65b1e73101018282583901c63fe326cf6ca78124768d68c501008c881b132ef83999c99bb8a23d22968046e259d10fbd46bf394d0327a32ea71afe3f8910c30beee404821a00165c38a2581c2e8e5e8e1d7837ccc509e30045f656f9e9ebed7ef5621085172d0e9aa446636c617261320146636c617261330146636c617261340147636c617261313101581cd436d9f6b754582f798fe33f4bed12133d47493f78b944b9cc55fd18a15053756d6d69744c6f64676531363336330182583901c63fe326cf6ca78124768d68c501008c881b132ef83999c99bb8a23d22968046e259d10fbd46bf394d0327a32ea71afe3f8910c30beee4041a010465e9021a0007cfe70b5820126750c84767cace394a3bf78350a69d2fbc9e470975a47e73672fb513431dc00d81825820fb62b5141e0e6595e4e7382d7b16747785b3333e89d65079c2d39f3d65b1e731010e81581cc63fe326cf6ca78124768d68c501008c881b132ef83999c99bb8a23d1082583901c63fe326cf6ca78124768d68c501008c881b132ef83999c99bb8a23d22968046e259d10fbd46bf394d0327a32ea71afe3f8910c30beee4041a00e55388111a000bb7db", typeof(TransactionBody))] // Serialized CBOR for TransactionBody(Babbage)
    // [InlineData("a500828258209a8fbe63b8d95c30746d3337fafd8fbe11dfa72bf05c3e7876fc28665a745bf900825820548650236f3bae15b8ddb7d65dde5ba6fb1785606880f44eff04b2316f6affde0101828258390109c230576e5d6c062a0fa95edafb4b7760bf48c9569c949294993befdcffc654e5f87793e8875d6cb40cfc8da22aeeecd7b62dc26e037df5821a00169b08a1581c49450fe5ce314aa6ef5d4c947d69d4af8e298a005114718a7cc1f784a14d41444150756e6b334430333530018258390109c230576e5d6c062a0fa95edafb4b7760bf48c9569c949294993befdcffc654e5f87793e8875d6cb40cfc8da22aeeecd7b62dc26e037df51a04144c52021a000fa6b90b5820318f56b89c98d3785d39da7f7b5e519843101a7e6256ade04d10ec8ee695153f0d81825820b7aeaf10a7addfcf7a0011c5520b393d3f7450fa9dcb8d7528c565737499cb0c00", typeof(TransactionBody))] // Serialized CBOR for TransactionBody(Alonzo)
    // [InlineData("82582014585da9857b30cf57edccac19d3012b602bb5650c7726a5f1504d9614d205225840f56c63ae453e3ad3434a1f46c9d703cd6d34d746229755acdf37ec8d1ecda69ae022b06af5e7fc238f8d5c68532d196d5b7478ba1d6ff9f9bddf485898fdd903", typeof(VKeyWitness))] // VKeyWitness
    // [InlineData("8200581cf0939d61b27630744e09f74ec141b8d6923f8c9f211beab1d100447e", typeof(NativeScript))] // NativeScript
    // [InlineData("845820bdc5ddd2037b5536b24ee0bdface0cd627e31be9d1844d868a7272f621c4431c58400b2096029281541ccfcf14d44d12c88377a1c4ead8224d4fa45f3800c9977892a46c6febaf2a394e92ddaca2afd6f468690c365385f3b8d7e6bc13214a24d502582052a081234e70e4cb8bfb8296954d42d72b2965c24f3eafe69287090f1472535e41a0", typeof(BootstrapWitness))] // BootstrapWitness
    // [InlineData("a200828258207cc7091d65bf2e715a06c3d94699ec0214246dd0cdca954e3e2c84426f02a73f58407ea844aa5ac8dd919c92cd92fa58f5b1755698eb1463600ab7a2dec0dcd6e57368335898ba25f7b029939b5b78281aa3db30e0b65023c3cbf09267326f3a640682582059dadb13453650a8129bf204ebd6ce4268e61ee8b2657fd39a977f2c72cb90985840d20be7cc6417abf45fcb7c06b5fa0bdc63483ca9b7a8c0bd74c54ddfc2ba621e6f52705885f8b8d88af966565760d0ff82c6893deed3265724a79b998216af0601818200581cf0939d61b27630744e09f74ec141b8d6923f8c9f211beab1d100447e", typeof(TransactionWitnessSet))] // TransactionWitnessSet
    // [InlineData("85828a1a00a5437e1a080709ee58201253745c002f37a8bf4c9254d2149da5587acaea9fe193029c05a56118f4ca1758200132f8a2c41dfdf94346bba0e694c6f893b81961f4583028a7b96aa0aae11cd65820d8b3d4dbe1012da956abca65d868c5a22f8c9e17290b5806283ed48624b34732825840913a25e9a0cb368a553d74102207f2ce0d336fb35fee4c6b0d40c7ba4ebb93d9b919befca50baec225bb33763b0407c0e06e32621de3fae5c45c0b724778a74c58509bb0011f33d513811f472e308ca24d4a6b544cbe9db39006952ede0210fb8559b13aa7f93fcc4ea26ba850c437e2f198eec5f28f04eba5dfca796ccf96661804d576f2c26809729850d64d84f64572061901e85820854f348f8dc647c11a51a139ea0c3b7adfc506ea1ba64fa8453e39a1aafeb5b1845820c4a2891ef9fdca62de54c4ddabc54fcb7e8e1d5ffb4bed038c1a53c715689fc2071903fe5840cf93116293539e99add5d060d517d676288bf271adeb9d4bc56109b547317eeaf0e9760d55128c59aa626c14106066b10bf222ea38cf8c796adb2742a44f0f088209015901c05a1eff829673047b992110ef85a39c6fb8fbb2af415604349f1c37c23a02e8ab9d87c8766791be97d2fb5537f85003da23e9da123db98db7ba662d96d054990067aeae31639dd22f4db70a340379b64002535825156dd7b797e0ce52e26e9a40f3fc845249bd7a471122a848d5873ee3138218b17513a56d0f63a48e174bbc1b5e75fa256a3483a8adb7ff111ee894622ab87337b322d655b77098423488346ea297f5e7b0c7a4a9a7ac7e2a37f8f1326e1b42eda8568f57b6ae54ddd448f1835fa0552329224ff124d0b08e7849ca478e8e9286f2851cf24c3b9541d7995774d63f49505e3242ce350a2d8fef58cb784143b043690c1dace0e7c0928c6ac2ddd37dc3ca1fa1fa598dfe8f6d8823e1443e07716f598d46a620d8af8f89e21ddce7775a29fb4f6f9df95eb5e6c08f8febd7223c945d6ce04e7890629465f2b7f5e14d5154f7161cd71a2b18e0628c20914eb5d5ea5033eead076d0d699e9c4179b2a291913d7a93ebd186f0766ebf09e5a41e1877e09d2e315afffc405795ba21994273f55f4ebe14d978a13c4ea5a5511fbd928adf3aec8b317fe406fc3be465a209e50ff5a44817bb26062bfea2c8b7bc0568307ba4853df8e88cf4d3c332e181a40082825820d202e399a18248d142dbab9cb763b642e8df1031e8c381ffb8d869410c4fcc1d01825820d202e399a18248d142dbab9cb763b642e8df1031e8c381ffb8d869410c4fcc1d0201838258390137dab9bb2d7a3a3ff47d50418b574d8b9ae85acffdd37bff7ffabbc81da920c86fee80710768690184ea9292968b4a5b1ebf2bdc2951f46d821a0011e360a1581cde9badd382e22795872bf2860dbe46e785b9c505b9c3f9c67d2b4591a14a4d484c4b42414e474b4f19714882583901d7ee9898101b050a2dcffb0cc752fb0682d2a7aadebd7e2f07435ed865bb660f6c806d23c1e3d0c0954b964778f0fe01905f46f010cba900821a0012050ca1581cde9badd382e22795872bf2860dbe46e785b9c505b9c3f9c67d2b4591a14a4d484c4b42414e474b4f1a0018047082583901d7ee9898101b050a2dcffb0cc752fb0682d2a7aadebd7e2f07435ed865bb660f6c806d23c1e3d0c0954b964778f0fe01905f46f010cba9001a008164a6021a0002b359031a0d1daffc81a1008182582038295976d2706366d670d0a0b115c360aaabc89aeb346e7a9b016e8120a829b35840254c219eb2c9a203c3bb52c91c14dced7521419d928176ec17e6042e9dbce6c9a21034cbe89ea9fac3c7af091ab64ed1833121ec925544f9876a28022caa650fa080", typeof(Block))] // Conway Block
    // [InlineData("85828a1a007ea60d1a04eef88258207986632c436341dadb464eb33e9a507a1c234438517601c007799423da4d708258205153f4624db2e4f78a163da8bbd50888339d84d3830473ff2fe31e7020f603785820d746c4f866ffade3fa14371f6847f959ad507600b63e8a9748685964bcef588f8258403775fea8c6535afb589d21f74744c2c377045f8460876465651e4e69c739d5fcbaadfefaac6fa1d5b397b313a4e48cea4a52f458b3445544861eed265940b60e5850f73493ff204a2a80d1832491609ac57c42003e6d1f47aca8ebf70359c1587cfdc8485822cebb668e9a481875b88b09fa245c322a7cbe7cf0e8ed44b23bc3b9d85a4073679b08414b5dd61b00d6b4890b1901e05820c31f0c5102178ef6149c8b2f1857bbce45956b15503603e7c04b7b30b0825c3b84582043ac3937e039fc0326bfcd0f083acc5faf0d111e7f442420aacdc5b9b9fb9ba409190271584000b0ba683b83b6a9a6b5f7d027e26f3f86a8d05b6ac5d120f81272e91c383393d0c9aa0111419ed0ed4cec766cb11a2ebbdb349cffed02eb494b641252ec230a8208005901c05626fc7b5165b3efaa14a771163069fb74eed823a2681a6f2d0ca0f60dbbecd15d8db01f9ed7fffbd8df3443e09e0b90b0066e2bc3176dda89284b758efcb901e80c6d8597a6193b86621764ddbcfee1cf099ec7fb8f70d3d41aaee8efe5404bf885c9f468af82e27e4466f704a18beb9fc5f2f66e3b0e500714d1336b1706750b393d6f3df2fce415357f0caacbf8825e4b1eaa87d997c536c4018bd8fb0473ae704118f51db579840492970b86a735236c93c134516bfe656a933c6e1d6a37227c5c353008d96bea64aeb9c9cb639e5f1812374148ef6703cb58e231977e2a1212dcd4fb3b38042ef5ba7810037975ab71825dae9545b412f966100912e5d50a4b0dc824c9dfe3cdf84bcf1c8638c3410478dfb318cf44ab33abc6f8594db00d6c39c661c747f3d4feebe816bfd784378b499b5cbe3fa16b893600f28d35aefeee2854b75f063911745a164cef64c106a28adbb69df25eb21ae7943aa1bcec4013efd14ac49b593a395f08a113e6db465953f3ac5cc4b464a41d20b7bc309a7579762d6dfb4a3b6aefca8482794a018721576b567fdbb8ad5b17f6f923920eb3abe664d4d5221e76d2010a85adb42f9bde2b9542dc6fda303b13a8bd1a28fb82a30081825820ae680f6cf8e3e8ca1311beca960e8647e7009a1deb5ffaae38965cc69fe694b9000181a200583901a5df21aa0ee524fc0f8be1263cd2f80b01f59f5af8a55a054e1dbba89e31cb21c3ee2cfc0ecac5ffe56e21a3aca07434cccdf429cdd0c478011a0475b593021a0002b32da400828258203abdfc0329b22ae449bb4b79de5d96cdde7305c5fe5c2ec007135a59862c66b700825820749207f84ca33841719e920f709e5302ac16d764f67e49f093d9334082be99be010181825839013859de23916bbb41c0d691271d0a98c54b8913c870751e45c4da930200f5968396ecf5b2030660d61f9d6637443afce601ae26d5d29395be1a04b571c0021a000a036e031a04ef4cab82a1008182582078167d41cbadf29fbe2a206f385474905065ab90f26349f68daf81dfda52516158408e95c8fe5cc76986b261a1931b47f75553ebc317e51ea30802b5bb70c3ef5d28153265926e9b5139c4ab8ec407cdd49ffe31aff038e5d9d4d94d0d10165f200ba100818258206b4a301fcb1c9a89e0ee423790743b352f2ca3f9586fba267b4225fd7cec7336584042b7c8f32cb20a0c54c28dc293056fd1e156339edf568db4895a479efc123188316dc5269bce1fb7ad2cc3edcb7c0bf9c7877dd6161fadf10d512d1ebefb6400a080", typeof(Block))] // Babbage Block
    // [InlineData("85828f1a005f60d71a02659fd7582017e878c2246dc522649590edc6ddff8c0910397198d9cf1da3ec7488afb44f1e58203dad01d35e7eaeeb62f95f5d76e2ee5e6396d1a6906976ebdbed78a59441cd00582076f2afc5f8986babb184c68e800856cbe034f1dff33ed8c3dc86c35c0583c7508258409d2b922d9e2bb74209e1fcb8c586fe05e2829a4ab293dcec757431cdddd1fd09a78d7bfd732ec9b6e864636c29c485806a00cad1236262562d75ea3538e17f24585088fdd2904dd4300170624027a6ae524b1742b8c50b04f04f0f58f5e909ddb930f31a50057631fd310d616cd5985756676a903b941d5dfc8f1696d97cb9a7040d2ae9262178de65ca5be01edf819c8c0d82584000005eb0b57ad1617b01c564f702a2c75778ddb57a325f1d33317f183588cd304ee638ea6323a76fe967662f232d57f85065d078ba1a169cdd598565113e556058504dc688f5eb69d8fe064ad016db62fa00625a4de9fe2794e87eaaa4503cc6e8ff4d399a2861b6c87a4d42c2272aca2e54fa71c7cd54e4fcc1c66fa7887f329f2236b3dd11bd592edcf4ca4f2acda866091901ab58202ad0f519064d482c800c6e266973185fead6c9ced91ed00040f2202a8e794a1e5820a6ad4b91df14e92d4a54b075493a2ff855d8366337f601a3cc98ad2b598328da041901325840e564622ee86b3666f9966367cd565348d8e8daa4bffb47a1985bc64a80358bc673ef226a4d7d11c6484cd32990a73ae6d0a2270c321e63f5a04165253f3c9c0c05005901c03cdaa3a6dd78fca76d62d73ee84267716b3cb43cb6d5007e06d3254f47076f4bab2282d91db2f69c38f2adef3e81fe509f2e0a8d8d999b436148b11e0e4caa01ec10812f60692edf6063fb50047fa209dff514fe33a32c47942695628355540e79ebc3ff65edf84a2b36a302423c3e13ad1dd363477721f120aa5ef5fdc01b147fdb01da60839eb06a8ec6fcb85d94d7c8862eb94e6555ce8e5902ac234eb2ed6e1523666775dd4be33f8dfd4d2d738af38b053f6b5f7cfe9fc3466dbfd0ef473ac5eefe9ae79543d09f7ddbe8af602464180007fbcde74e68c789d56a3a374178426d682286eeded33fe83518cb7eb10efbbdeec45442a9c0da4c656efcc4b408b82bef93f6773bb2cf6d6458def201b02dbe34616cd788f8bd02bfebb2dabd502f85ca78d8177abe953a6317327f1cb49206dd97437947452a52f86d0e18e52de49889b548dd05b6bb307f7b4413f060508ab2684b1324e29e74a01584337bb5a039b6abce81d90a8f193cc27af22cb43a2df3e55bbfe97696376704493322adb46ab9d716479159614bf5456ae914eff7ee3d47c3421c3af170d8e7acba34982355de78774f8ff2d817ae8d260253b7a79f12c917d25a9effd277af58f82181a50081825820d599114dee813f4c30ef56221465b4518b42ac494376f8e011f063cf513e2239080181825839016dfb187004fb9e2cd692fb1af87db1212101fb35c530f5ba960fd95c198bef55ac151048439f1a6260d8d4f56e49b17f252f420f3e5f04151a0077694f021a0002a8b1031a0265bba7048282008200581c198bef55ac151048439f1a6260d8d4f56e49b17f252f420f3e5f041583028200581c198bef55ac151048439f1a6260d8d4f56e49b17f252f420f3e5f0415581cd65467e9d63f124ed903101f82868bda6ffd39f83bc7d30de65a288f81a10082825820eb999ee40eb31fe5e46f1b9b12d892f7b557c4795fcee88bb0d633faab04b9105840426ade279ad95bdef4e6bb852d4735b2964e335d13a5eca18fa0b3f159bb815f1eee8c839cd89d727c9949c337d4a38d7e17dba18f3badcf605a0913a7bc240682582063ea71f82e651c6d12f176373ec8430fa4076cae60f82ecf5059a3640900c46f5840def0888ede9f1eabb8a28a7a03bf0db4e6b9f5600c6a34be13d4144404ba0a40721008477bbd9e6a7325acefac25de7b6dcb1ca1d534fdf4ebdca66add7a6f03a080", typeof(Block))] // Alonzo Block
    // [InlineData("83851a2d964a09582028d9bcb622e7a6d71f3788ba3967699f95bb1b1ea3f9751a80d647d143c4e4488483015820c21e3b9d52cc0a1cd3798729896518e0d3ec6e381756a35b60fe57606614c84058201746917b5464781e318a73a935e0c6c3756be59240967a1cd52c13370319bd5082035820d36a2619a672494604e11bb447cbcf5231e9f2ba25c2169177edc941bd50ad6c5820afc0da64183bf2664f3d4eec7238d524ba607faeeab24fc100eb861dba69971b58204e66280cd94d591072349bec0a3090a53aa945562efb6d08d56e53654b0e409884820919160158409a6fa343c8c6c36de1a3556feb411bfdf8708d5af88de8626d0fc6bfa4eebb6d99ab83d90d66531ad9122d3f9cb4bc9d05b26448672532a68da796f9328431fd811a00030d41820282840058409a6fa343c8c6c36de1a3556feb411bfdf8708d5af88de8626d0fc6bfa4eebb6d99ab83d90d66531ad9122d3f9cb4bc9d05b26448672532a68da796f9328431fd58408b53207629f9a30e4b2015044f337c01735abe67243c19470c9dae8c7b73279809887b9f420d6f70ee1e9d50c16052878e544b65cb5d44bd691756b284cd829b5840c946fd596bdb31949aa435390de19a549c9698cad1813e34ff2431bc06190188188f4e84001380713e3f916c7526096e7c4855904bff40385007b81e1e657d0e5840176246c7554bdcdf30235c8660201ea0b4f839e052b3ac25f85b5942aedcbbf52127fca693a69232b753f09f8e7ddff48d89f621587b87d62a6088fea5d0190c8483000000826a63617264616e6f2d736c02a058204ba92aa320c60acc9ad7b9a64f2eda55c4d2ec28e604faf186708b4f0c4e8edf849f82839f8200d8185824825820430be2cf72e56c4d735bf02237b0f6394d3c70e45217de613df584da191817be00ff9f8282d818584283581cfd6584cfdda31c339f5c66f114a495bcf9bd625c427ea5f0d5fab084a101581e581cca3e553c9c63c51143caed4344af89cc406730303e8733a13a90883a001ac5f706611b00000748bdff07388282d818584283581c1b3d53b2918e204f7397d38411d4a9d3cee549e5464de4051f1aca45a101581e581c3d48fef4fe8779816bbd00448f7eb87958711264aa75c9a41b765582001a2649fcd51b00000013ee83a149ffa0818200d8185885825840e4852f95a989329fb116970353d98abb1f211de398ec5372277769dc08d37db023109443f07c5c96fa03fbd4c4e6f75132bec42fe223f0dafbbed95187c281685840c49347b5c92f0db8276cd9b3fb568616edf0bcbdda13fe9e55fa225d11438956449175e7ec81247927ab8574571b4eb67d0fc83f8282c505882e2f59ab74940bff8203d90102809fff82809fff81a0", typeof(Block))] // Byron Block
    public void SerializeAndDeserializePrimitives(string cborHex, Type type)
    {
        // Arrange
        byte[] cborBytes = Convert.FromHexString(cborHex);

        // Act
        MethodInfo? deserializeMethod = typeof(CborSerializer).GetMethod(nameof(CborSerializer.Deserialize));
        Assert.NotNull(deserializeMethod);

        MethodInfo? genericDeserializeMethod = deserializeMethod?.MakeGenericMethod(type);
        Assert.NotNull(genericDeserializeMethod);

        object? cborObject = genericDeserializeMethod?.Invoke(null, [cborBytes]);
        Assert.NotNull(cborObject);

        byte[] serializedBytes = CborSerializer.Serialize((ICbor)cborObject);
        string serializedHex = Convert.ToHexString(serializedBytes).ToLowerInvariant();

        // Assert
        Assert.Equal(cborHex.ToLowerInvariant(), serializedHex);
    }
}